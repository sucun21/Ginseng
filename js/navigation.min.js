 !function(){var a,b,c;if(a=document.getElementById("site-navigation"),a&&(b=a.getElementsByTagName("button")[0],"undefined"!=typeof b)){if(c=a.getElementsByTagName("ul")[0],"undefined"==typeof c)return void(b.style.display="none");c.setAttribute("aria-expanded","false"),-1===c.className.indexOf("nav-menu")&&(c.className+=" nav-menu"),b.onclick=function(){-1!==a.className.indexOf("toggled")?(a.className=a.className.replace(" toggled",""),b.setAttribute("aria-expanded","false"),c.setAttribute("aria-expanded","false")):(a.className+=" toggled",b.setAttribute("aria-expanded","true"),c.setAttribute("aria-expanded","true"))},jQuery(".main-navigation, .secondary-navigation").find("a").on("focus.shop-isle blur.shop-isle",function(){jQuery(this).parents().toggleClass("focus")}),jQuery(window).load(function(){jQuery(".site-header-cart").find("a").on("focus.shop-isle blur.shop-isle",function(){jQuery(this).parents().toggleClass("focus")})})}}();

jQuery(window).load(function(){

	// product list
	jQuery('ul.products li.product .button, .shop-item-detail .button').wrap('<div class="product-button-wrap"></div>');
	jQuery('.post-type-archive-product .products li, .tax-product_cat .products li, .related.products .products li, #shop-isle-blog-container .products li, .upsells.products li').each(function(){
		jQuery( this ).find( 'img' ).wrap( '<div class="prod-img-wrap"></div>' );
		jQuery( this ).find( '.prod-img-wrap' ).append( jQuery(this).find( '.product-button-wrap' ) );
	});
	
	if(( typeof jQuery('a.button.compare') != 'undefined' ) && ( typeof jQuery('a.button.compare').parent() != 'undefined' )) {
		jQuery('a.button.compare').parent().addClass('shop-isle-compare-list-wrapper');
	}

});

jQuery(document).ready(function(){
    var wooInfo = jQuery('.woocommerce-info');
    if( wooInfo.length>0 && wooInfo.closest('.container').length==0 ) {
        wooInfo.addClass('container').css({
            'margin-left': 'auto',
            'margin-right': 'auto',
        });
    }
});

( function($) {

    $( '.woocommerce-page-title' ).unwrap();

    /* footer fixed  */
    $( window ).load( fixFooterBottom );
    $( window ).resize( fixFooterBottom );

    function fixFooterBottom(){
        var pageWidth = window.innerWidth;
        /* if page is less than 768px */
        if (pageWidth > 768){
            var bodyH   = $( 'div.main' ).outerHeight();
            var windowH = $( window ).outerHeight();
            if ( bodyH < windowH ){
                $( '.bottom-page-wrap' ).css({
                    'position'  : 'absolute',
                    'bottom'    : '0',
                    'width'     : '100%',
                    'z-index'   : '9'
                });
                $( 'div.main' ).height( windowH );
            }
        }else{
            $( '.bottom-page-wrap' ).css({
                'position'  : 'relative'
            });
            $( 'div.main' ).height( 'auto' );
        }
    }

    $( '.header-search-button' ).click( function(event) {
        $( '.header-search' ).toggleClass( 'header-search-open' );
            $( '.navbar-collapse').removeClass( 'in' ).attr( 'aria-expanded', 'false' ).css( 'height', '1px' );
            $( '.navbar-toggle').attr( 'aria-expanded', 'false' );
            $( '.navbar-toggle').addClass( 'collapsed' );
    } );

    $( '.header-search' ).click( function(event) {    
        event.stopPropagation();
    } );

    $( 'html' ).click( function() {
        $( '.header-search' ).removeClass( 'header-search-open' );
    } );


} )(jQuery,window);


/*** DROPDOWN FOR MOBILE MENU */
var callback_mobile_dropdown = function () {

	var navLi = jQuery('.navbar-nav li');

    navLi.each(function(){
        if ( jQuery(this).find('ul').length > 0 && !jQuery(this).hasClass('has_children') ){
            jQuery(this).addClass('has_children');
            jQuery(this).find('a').first().after('<p class="dropdownmenu"></p>');
        }
    });
    jQuery('.dropdownmenu').click(function(){
        if( jQuery(this).parent('li').hasClass('this-open') ){
            jQuery(this).parent('li').removeClass('this-open');
        }else{
            jQuery(this).parent('li').addClass('this-open');
        }
    });

};
jQuery(document).ready(callback_mobile_dropdown);
